import{r as o,j as e,F as p,f as O,a as R,b as _,c as $,d as V,e as B,g as K,h as H,i as J,k as Q,l as U,m as G,n as Y,o as q}from"./vendor-BF5JPLZc.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();const z="/be_write_back/assets/clipboard-img-DOIKZzET.webp",Z="/be_write_back/logo.webp",W=15,N=(t,s)=>Math.random()*(s-t)+t,X=()=>{const[t,s]=o.useState([]);return o.useEffect(()=>{const a=Array.from({length:W},(n,r)=>({id:r,top:`${N(-10,40)}px`,left:`${N(-20,240)}px`,delay:`${N(0,3)}s`}));s(a)},[]),e.jsx("div",{className:"stars-container",children:t.map(a=>e.jsx("div",{className:"star",style:{top:a.top,left:a.left,animationDelay:a.delay}},a.id))})},C="instructionsVisibility",ee=()=>{const[t,s]=o.useState(()=>{const l=localStorage.getItem(C);return l===null?!0:JSON.parse(l)});o.useEffect(()=>{localStorage.setItem(C,JSON.stringify(t))},[t]);const[a,n]=o.useState([!1,!1,!1]),r=o.useRef(a);return o.useEffect(()=>{t?r.current.forEach((l,i)=>{setTimeout(()=>{n(c=>{const d=[...c];return d[i]=!0,r.current=d,d})},i*400)}):(n([!1,!1,!1]),r.current=[!1,!1,!1])},[t]),e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"logo-wrapper",children:[e.jsx("img",{src:Z,alt:"Logo",className:"app-logo",width:"32",height:"32"}),e.jsxs("div",{className:"brand-text",children:[e.jsx("span",{className:"brand-line",children:"dotterel"}),e.jsx("span",{className:"brand-line",children:"design"})]})]}),e.jsxs("div",{className:"title-container",children:[e.jsxs("div",{className:"title-wrapper",children:[e.jsx("h1",{className:"app-title",children:"bewriteback"}),e.jsx("span",{className:"subtitle-jp",children:"書いて戻ります"})]}),e.jsx("p",{className:"tagline",children:"Quickly Save and Recall Copied Notes"})]}),e.jsxs("button",{className:"accordion-toggle",onClick:()=>s(!t),children:[t?"Hide instructions":"How does it work?"," ",e.jsx(p,{icon:t?O:R})]}),t&&e.jsxs("div",{className:"instructions",children:[e.jsxs("div",{className:`step-container ${a[0]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 1"}),e.jsx("p",{children:"Paste text using ctrl+v (or cmd+v on Mac)."})]}),e.jsxs("div",{className:`step-container ${a[1]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 2"}),e.jsx("p",{children:"Name your saved text in the pop-up, it will be stored below."})]}),e.jsxs("div",{className:`step-container ${a[2]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 3"}),e.jsx("p",{children:"Copy it again by clicking anywhere on the card."})]}),e.jsx("div",{className:"glow-sphere sphere-1"}),e.jsx("div",{className:"glow-sphere sphere-2"}),e.jsxs("div",{className:"clipboard-container",children:[e.jsx("img",{src:z,alt:"Clipboard Instructions",className:"clipboard-img"}),e.jsx(X,{})]}),e.jsx("div",{className:"glow-sphere sphere-3"}),e.jsx("div",{className:"glow-sphere sphere-4"})]})]})};function T({isOpen:t,onConfirm:s,onCancel:a}){o.useEffect(()=>{if(!t)return;const n=r=>{r.key==="Escape"&&(r.preventDefault(),a()),r.key==="Enter"&&s&&(r.preventDefault(),s())};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t,s,a])}const te=({onSave:t,onClose:s,isOpen:a,pastedText:n})=>{const[r,l]=o.useState(""),i=o.useRef(null),c=o.useRef(null);T({isOpen:a,onCancel:s,onConfirm:d}),o.useEffect(()=>{a&&(l(""),requestAnimationFrame(()=>{i.current?.focus()}))},[a,n]),o.useEffect(()=>{if(!a)return;const m=b=>{c.current&&!c.current.contains(b.target)&&s()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[a,s]);function d(){r.trim()&&(t(r.trim()),s())}return a?e.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:"modal-content",ref:c,children:[e.jsx("h2",{id:"modal-title",children:"Name your paste"}),e.jsx("input",{ref:i,type:"text",placeholder:"Enter a name...",value:r,onChange:m=>l(m.target.value),onKeyDown:m=>{m.key==="Enter"&&d(),m.key==="Escape"&&s()},autoComplete:"off",spellCheck:"false","aria-label":"Paste name input"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{onClick:d,children:"Save (Enter)"}),e.jsx("button",{onClick:s,children:"Cancel (Esc)"})]})]})}):null},se=o.memo(te),ae=({onSortChange:t,isAscending:s,sortType:a})=>e.jsxs("div",{className:"sort-buttons-container",children:[" ",e.jsx("span",{className:"sort-label",children:"Sort"})," ",e.jsxs("div",{className:"sort-buttons",children:[e.jsx("button",{onClick:()=>t("displayName"),children:e.jsx(p,{icon:a==="displayName"&&s?_:$})}),e.jsx("button",{onClick:()=>t("timestamp"),children:e.jsx(p,{icon:a==="timestamp"&&s?V:B})})]})]}),re=({onPaste:t,disabled:s=!1})=>e.jsxs("button",{className:"paste-button",onClick:t,disabled:s,children:[e.jsx(p,{icon:K,className:"paste-icon"}),"Paste"]});function ne(t,s=300){const[a,n]=o.useState(t);return o.useEffect(()=>{const r=setTimeout(()=>n(t),s);return()=>clearTimeout(r)},[t,s]),a}const oe=({onSearch:t})=>{const[s,a]=o.useState(""),n=ne(s,300);o.useEffect(()=>{t(n.trim())},[n,t]);const r=l=>{const i=l.target.value;a(i)};return e.jsx("input",{type:"text",className:"search-bar",placeholder:"Search...",value:s,onChange:r,"aria-label":"Search pastes"})},le=({item:t,copyToClipboard:s,onToggleFavorite:a})=>{if(!t||!t.id||!t.text)return console.error("❌ Error: Invalid Card data",t),null;const n=l=>{l.stopPropagation(),s(t.text,t.displayName)},r=l=>{l.stopPropagation(),a(t.id)};return e.jsxs("div",{className:"paste-card",onClick:n,children:[e.jsx("div",{className:"timestamp",children:t.timestamp}),e.jsxs("div",{className:"card-top-icons",children:[e.jsx("button",{className:"copy-icon",onClick:n,"aria-label":"Copy text",children:e.jsx(p,{icon:H})}),e.jsx("button",{className:"star-icon",onClick:r,"aria-label":t.isFavorite?"Unfavorite":"Favorite",children:e.jsx(p,{icon:t.isFavorite?J:Q})})]}),e.jsx("div",{className:"pasted-text",children:t.displayName})]})},ie=o.memo(le),ce=({isOpen:t,onConfirm:s,onCancel:a})=>{const n=o.useRef(null);return T({isOpen:t,onConfirm:s,onCancel:a}),o.useEffect(()=>{if(!t)return;const r=l=>{n.current&&!n.current.contains(l.target)&&a()};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[t,a]),t?e.jsx("div",{className:"confirm-modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title",children:e.jsxs("div",{className:"confirm-modal",ref:n,children:[e.jsx("p",{id:"confirm-title",children:"Are you sure you want to delete all saved pastes?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"confirm-btn",onClick:s,children:"Yes, Clear All"}),e.jsx("button",{className:"cancel-btn",onClick:a,children:"No, Keep Them"})]})]})}):null},de=o.memo(ce),ue=({onClear:t})=>{const[s,a]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"clear-button",onClick:()=>a(!0),children:e.jsx(p,{icon:U,className:"trash-icon"})}),e.jsx(de,{isOpen:s,onConfirm:()=>{a(!1),t()},onCancel:()=>a(!1)})]})};function me(t){const[s,a]=o.useState("displayName"),[n,r]=o.useState(!0);return{sortedItems:o.useMemo(()=>[...t].sort((c,d)=>s==="timestamp"?n?new Date(c.timestamp).getTime()-new Date(d.timestamp).getTime():new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime():n?c.displayName.localeCompare(d.displayName):d.displayName.localeCompare(c.displayName)),[t,s,n]),handleSortChange:c=>{s===c?r(!n):(a(c),r(!0))},sortType:s,isAscending:n}}const pe="bewriteback_pastedTexts",fe=(t,s)=>({handleClearAll:()=>{t([]),s(!1),localStorage.removeItem(pe)}});function he(){return Math.random().toString(36).substr(2,9)}function xe(){return new Intl.DateTimeFormat("en-NZ",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date)}const be=t=>{const[s,a]=o.useState(null),[n,r]=o.useState(!1);return{newPaste:s,setNewPaste:a,showModal:n,setShowModal:r,handleSaveName:i=>{if(!s)return;const c=xe(),d={id:he(),text:s,displayName:i,timestamp:c,manualOrder:Date.now()};t(m=>[...m,d]),a(null),r(!1)}}};function E(){const[t,s]=o.useState(null),a=o.useRef(null);return{toastMessage:t,triggerToast:r=>{a.current&&clearTimeout(a.current),s(r),a.current=setTimeout(()=>{s(null)},2500)}}}function ge(){const{triggerToast:t}=E();return{copyToClipboard:(a,n)=>{navigator.clipboard.writeText(a).then(()=>{t(`Copied "${n}" to clipboard!`)}).catch(r=>{console.error("❌ Failed to copy:",r),t("Failed to copy to clipboard.")})}}}const je=(t,s,a)=>{const n=o.useCallback(l=>{const i=l.clipboardData?.getData("text")||"";i.trim()&&(t(i),s(!0))},[t,s]);return{triggerClipboardPaste:o.useCallback(()=>{if(!navigator.clipboard){a("Clipboard API requires secure HTTPS context.");return}navigator.clipboard.readText().then(l=>{l.trim()?(t(l),s(!0)):a("Clipboard is empty.")}).catch(l=>{console.error("❌ Clipboard read error:",l),a("Clipboard access denied or insecure context.")})},[t,s,a]),handleClipboardEventPaste:n}},k="bewriteback_pastedTexts",Ne=()=>{const t=localStorage.getItem(k);if(!t)return[];try{return JSON.parse(t)}catch(s){return console.error("❌ Failed to parse stored pastes:",s),[]}},w=t=>{localStorage.setItem(k,JSON.stringify(t))},ve=({triggerToast:t})=>{const[s,a]=o.useState(()=>Ne()),[n,r]=o.useState(""),[l,i]=o.useState(!1),{sortedItems:c,handleSortChange:d,sortType:m,isAscending:b}=me(s),{handleClearAll:F}=fe(a,i),{newPaste:I,setNewPaste:P,showModal:g,setShowModal:v,handleSaveName:A}=be(a),{copyToClipboard:D}=ge(),{triggerClipboardPaste:L,handleClipboardEventPaste:j}=je(P,v,t),M=o.useCallback(u=>{a(f=>{const h=f.map(x=>x.id===u?{...x,isFavorite:!x.isFavorite}:x);return w(h),h})},[]);o.useEffect(()=>(document.addEventListener("paste",j),()=>{document.removeEventListener("paste",j)}),[j]),o.useEffect(()=>{w(s)},[s]);const y=n.trim().toLowerCase(),S=o.useMemo(()=>c.filter(u=>u.displayName.toLowerCase().includes(y)).filter(u=>l?u.isFavorite:!0).sort((u,f)=>(f.isFavorite?1:0)-(u.isFavorite?1:0)),[c,y,l]);return e.jsxs("div",{className:"paste-container-wrapper",children:[g&&e.jsx(se,{isOpen:g,pastedText:I,onSave:A,onClose:()=>v(!1)}),e.jsxs("div",{className:"buttons-container",children:[e.jsxs("div",{className:"buttons-row",children:[e.jsx(re,{onPaste:L,disabled:g}),e.jsx(ae,{onSortChange:d,sortType:m,isAscending:b}),e.jsx("button",{className:`favorites-toggle ${l?"active":""}`,onClick:()=>i(u=>!u),"aria-pressed":l,"aria-label":"Toggle Favorites Filter",children:l?"Show All":"Show ⭐ Favorites"}),e.jsx(ue,{onClear:F})]}),e.jsx("div",{className:"search-row",children:e.jsx(oe,{onSearch:r})})]}),e.jsx("div",{className:"paste-container glassmorphism",children:S.length===0?e.jsx("div",{className:"empty-state",children:n?"No matching results found.":"No saved pastes yet. Try pasting something!"}):S.map(u=>{const f=u.displayName.length>10?`${u.displayName.substring(0,10)}...`:u.displayName;return e.jsx(ie,{item:u,copyToClipboard:h=>{D(h,u.displayName),t(`Copied ${f} to clipboard!`)},onToggleFavorite:M},u.id)})})]})},ye=()=>e.jsxs("footer",{className:"footer",children:[e.jsx("span",{className:"footer-line",children:"Built with ❤️"}),e.jsxs("span",{className:"footer-line",children:["Deployed via"," ",e.jsx("a",{href:"https://github.com/dottereldesign/be_write_back",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",children:e.jsx("svg",{className:"github-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.49.5.09.68-.21.68-.47v-1.65c-2.78.6-3.37-1.34-3.37-1.34-.45-1.16-1.1-1.47-1.1-1.47-.9-.62.07-.61.07-.61 1 .07 1.53 1.05 1.53 1.05.89 1.54 2.33 1.1 2.9.84.09-.64.35-1.1.63-1.35-2.22-.25-4.55-1.11-4.55-4.95 0-1.09.39-1.99 1.03-2.69-.1-.26-.45-1.3.1-2.72 0 0 .84-.27 2.75 1.02a9.57 9.57 0 0 1 5 0c1.91-1.29 2.75-1.02 2.75-1.02.55 1.42.2 2.46.1 2.72.64.7 1.03 1.6 1.03 2.69 0 3.85-2.34 4.7-4.56 4.95.36.31.68.92.68 1.85v2.75c0 .26.18.56.69.47A10.002 10.002 0 0 0 22 12c0-5.52-4.48-10-10-10z"})})})]}),e.jsx("span",{className:"footer-line",children:e.jsx("a",{href:"https://buymeacoffee.com/dottereldesign",target:"_blank",rel:"noopener noreferrer",className:"coffee-button","aria-label":"Buy me a coffee",children:e.jsx("img",{src:"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",alt:"Buy Me A Coffee",className:"coffee-icon",width:"100",height:"30"})})}),e.jsx("span",{className:"footer-line",children:"© 2025 Jamie Wilson"})]}),Se=({message:t,onClose:s})=>{const[a,n]=o.useState(!1);return o.useEffect(()=>{if(t){n(!0);const r=setTimeout(()=>{n(!1),s&&s()},2e3);return()=>{clearTimeout(r)}}},[t,s]),e.jsxs("div",{className:`toast ${a?"show":"hide"}`,children:[e.jsx("div",{className:"toast-icon",children:e.jsx(p,{icon:G})}),e.jsx("span",{className:"toast-message",children:t}),e.jsx("button",{className:"toast-close",onClick:()=>{n(!1),s&&s()},children:e.jsx(p,{icon:Y})})]})};function Ce(){const{toastMessage:t,triggerToast:s}=E();return e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsx(Se,{message:t,onClose:()=>{}}),e.jsx("main",{children:e.jsx(ve,{triggerToast:s})}),e.jsx(ye,{})]})}q.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Ce,{})}));
