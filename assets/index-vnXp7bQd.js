import{r,j as e,F as m,f as k,a as A,b as O,c as I,d as D,e as M,g as L,h as R,i as _,k as $,l as B,m as K}from"./vendor-BJCjwAsm.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();const F="/be_write_back/assets/clipboard-img-DOIKZzET.webp",V="/be_write_back/logo.webp",G=15,g=(s,t)=>Math.random()*(t-s)+s,H=()=>{const[s,t]=r.useState([]);return r.useEffect(()=>{const a=Array.from({length:G},(o,n)=>({id:n,top:`${g(-10,40)}px`,left:`${g(-20,240)}px`,delay:`${g(0,3)}s`}));t(a)},[]),e.jsx("div",{className:"stars-container",children:s.map(a=>e.jsx("div",{className:"star",style:{top:a.top,left:a.left,animationDelay:a.delay}},a.id))})},j="instructionsVisibility",J=()=>{const[s,t]=r.useState(()=>{const l=localStorage.getItem(j);return l===null?!0:JSON.parse(l)});r.useEffect(()=>{localStorage.setItem(j,JSON.stringify(s))},[s]);const[a,o]=r.useState([!1,!1,!1]),n=r.useRef(a);return r.useEffect(()=>{s?n.current.forEach((l,u)=>{setTimeout(()=>{o(c=>{const d=[...c];return d[u]=!0,n.current=d,d})},u*400)}):(o([!1,!1,!1]),n.current=[!1,!1,!1])},[s]),e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"logo-wrapper",children:[e.jsx("img",{src:V,alt:"Logo",className:"app-logo",width:"32",height:"32"}),e.jsxs("div",{className:"brand-text",children:[e.jsx("span",{className:"brand-line",children:"dotterel"}),e.jsx("span",{className:"brand-line",children:"design"})]})]}),e.jsxs("div",{className:"title-container",children:[e.jsxs("div",{className:"title-wrapper",children:[e.jsx("h1",{className:"app-title",children:"bewriteback"}),e.jsx("span",{className:"subtitle-jp",children:"書いて戻ります"})]}),e.jsx("p",{className:"tagline",children:"Quickly save and recall copied notes"})]}),e.jsxs("button",{className:"accordion-toggle",onClick:()=>t(!s),children:[s?"Hide instructions":"How does it work?"," ",e.jsx(m,{icon:s?k:A})]}),s&&e.jsxs("div",{className:"instructions",children:[e.jsxs("div",{className:`step-container ${a[0]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 1"}),e.jsx("p",{children:"Paste text using ctrl+v (or cmd+v on Mac)."})]}),e.jsxs("div",{className:`step-container ${a[1]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 2"}),e.jsx("p",{children:"Name your saved text in the pop-up, it will be stored below."})]}),e.jsxs("div",{className:`step-container ${a[2]?"fade-in":""}`,children:[e.jsx("span",{className:"step-number",children:"Step 3"}),e.jsx("p",{children:"Copy it again by clicking anywhere on the card."})]}),e.jsx("div",{className:"glow-sphere sphere-1"}),e.jsx("div",{className:"glow-sphere sphere-2"}),e.jsxs("div",{className:"clipboard-container",children:[e.jsx("img",{src:F,alt:"Clipboard Instructions",className:"clipboard-img"}),e.jsx(H,{})]}),e.jsx("div",{className:"glow-sphere sphere-3"}),e.jsx("div",{className:"glow-sphere sphere-4"})]})]})},Q=({onSave:s,onClose:t,isOpen:a,pastedText:o})=>{const[n,l]=r.useState("");r.useEffect(()=>{a&&(console.log("🟢 MODAL OPENED. Resetting name field."),setTimeout(()=>l(""),0))},[a,o]),r.useEffect(()=>{const c=d=>{d.key==="Escape"&&(console.log("❌ ESCAPE PRESSED: Closing modal."),t())};return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[t]);const u=()=>{console.log("✅ SAVING NAME:",n),n.trim()&&(s(n.trim()),t())};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter a name...",value:n,onChange:c=>l(c.target.value),onKeyDown:c=>{c.key==="Enter"&&u()},autoFocus:!0,autoComplete:"off",spellCheck:"false"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{onClick:u,children:"Save (Enter)"}),e.jsx("button",{onClick:t,children:"Cancel (Esc)"})]})]})})},U=({onSortChange:s,isAscending:t,sortType:a})=>e.jsxs("div",{className:"sort-buttons-container",children:[" ",e.jsx("span",{className:"sort-label",children:"Sort"})," ",e.jsxs("div",{className:"sort-buttons",children:[e.jsx("button",{onClick:()=>s("displayName"),children:e.jsx(m,{icon:a==="displayName"&&t?O:I})}),e.jsx("button",{onClick:()=>s("timestamp"),children:e.jsx(m,{icon:a==="timestamp"&&t?D:M})})]})]}),Y=({onPaste:s})=>e.jsxs("button",{className:"paste-button",onClick:s,children:[e.jsx(m,{icon:L,className:"paste-icon"}),"Paste"]}),z=({onSearch:s})=>{const[t,a]=r.useState(""),o=n=>{const l=n.target.value;a(l),s(l)};return e.jsx("input",{type:"text",className:"search-bar",placeholder:"Search...",value:t,onChange:o})},q=({item:s,copyToClipboard:t})=>{if(console.log("🟢 Rendering Card:",s),!s||!s.id||!s.text)return console.error("❌ Error: Invalid Card data",s),null;const a=o=>{o.stopPropagation(),t(s.text,s.displayName)};return e.jsxs("div",{className:"paste-card",onClick:a,children:[e.jsx("div",{className:"timestamp",children:s.timestamp}),e.jsx("div",{className:"copy-icon",children:e.jsx(m,{icon:R})}),e.jsx("div",{className:"pasted-text",children:s.displayName})]})},Z=({isOpen:s,onConfirm:t,onCancel:a})=>(r.useEffect(()=>{if(!s)return;const o=n=>{n.key==="Enter"?t():n.key==="Escape"&&a()};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[s,t,a]),s?e.jsx("div",{className:"confirm-modal-overlay",children:e.jsxs("div",{className:"confirm-modal",children:[e.jsx("p",{children:"Are you sure you want to delete all saved pastes?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"confirm-btn",onClick:t,children:"Yes, Clear All"}),e.jsx("button",{className:"cancel-btn",onClick:a,children:"No, Keep Them"})]})]})}):null),W=({onClear:s})=>{const[t,a]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"clear-button",onClick:()=>a(!0),children:e.jsx(m,{icon:_,className:"trash-icon"})}),e.jsx(Z,{isOpen:t,onConfirm:()=>{a(!1),s()},onCancel:()=>a(!1)})]})};function X(s){const[t,a]=r.useState("displayName"),[o,n]=r.useState(!0);return{sortedItems:r.useMemo(()=>[...s].sort((c,d)=>t==="timestamp"?o?new Date(c.timestamp).getTime()-new Date(d.timestamp).getTime():new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime():o?c.displayName.localeCompare(d.displayName):d.displayName.localeCompare(c.displayName)),[s,t,o]),handleSortChange:c=>{t===c?n(!o):(a(c),n(!0))},sortType:t,isAscending:o}}const ee="pastedTexts",se=s=>({handleClearAll:()=>{s([]),localStorage.removeItem(ee),console.log("🗑 Cleared all pasted texts.")}}),te=(s,t)=>({handlePaste:r.useCallback(o=>{const n=o.clipboardData?.getData("text");n&&(console.log("📋 Pasted Text (Raw):",n),s(n),t(!0))},[s,t])}),ae=s=>{const[t,a]=r.useState(null),[o,n]=r.useState(!1);return{newPaste:t,setNewPaste:a,showModal:o,setShowModal:n,handleSaveName:u=>{if(!t)return;const c=new Intl.DateTimeFormat("en-NZ",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date),d={id:Math.random().toString(36).substr(2,9),text:t,displayName:u,timestamp:c,manualOrder:Date.now()};console.log("🟢 Adding new entry:",d),s(p=>[...p,d]),a(null),n(!1)}}};function b(){const[s,t]=r.useState(null),a=r.useRef(null);return{toastMessage:s,triggerToast:n=>{console.log(`🔔 Triggering Toast: "${n}"`),a.current&&clearTimeout(a.current),t(n),a.current=setTimeout(()=>{console.log("🔴 Clearing toast message"),t(null)},2500)}}}function ne(){const{triggerToast:s}=b();return{copyToClipboard:(a,o)=>{navigator.clipboard.writeText(a).then(()=>{s(`Copied "${o}" to clipboard!`)})}}}const v="pastedTexts",oe=({triggerToast:s})=>{console.log("📌 Rendering PasteContainer");const[t,a]=r.useState(()=>{console.log("🔄 Loading pastes from localStorage...");const i=localStorage.getItem(v);return i?JSON.parse(i):[]}),[o,n]=r.useState(""),{sortedItems:l,handleSortChange:u,sortType:c,isAscending:d}=X(t),{handleClearAll:p}=se(a),{newPaste:y,setNewPaste:x,showModal:N,setShowModal:h,handleSaveName:S}=ae(a),{copyToClipboard:w}=ne(),{handlePaste:f}=te(x,h);r.useEffect(()=>(console.log("📋 Adding clipboard paste event listener"),document.addEventListener("paste",f),()=>{console.log("❌ Removing clipboard paste event listener"),document.removeEventListener("paste",f)}),[f]),r.useEffect(()=>{console.log("💾 Saving pastes to localStorage:",t),localStorage.setItem(v,JSON.stringify(t))},[t]);const C=()=>{console.log("🟢 Triggering paste event..."),navigator.clipboard.readText().then(i=>{i&&(console.log("📋 Pasted Text:",i),x(i),h(!0))}).catch(i=>{console.error("❌ Failed to paste:",i),s("Clipboard access denied!")})},T=l.filter(i=>i.displayName.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"paste-container-wrapper",children:[N&&e.jsx(Q,{isOpen:N,pastedText:y,onSave:S,onClose:()=>h(!1)}),e.jsxs("div",{className:"buttons-container",children:[e.jsxs("div",{className:"buttons-row",children:[e.jsx(Y,{onPaste:C}),e.jsx(U,{onSortChange:u,sortType:c,isAscending:d}),e.jsx(W,{onClear:()=>p()})]}),e.jsx("div",{className:"search-row",children:e.jsx(z,{onSearch:n})})]}),e.jsx("div",{className:"paste-container glassmorphism",children:T.map(i=>{const E=i.displayName.length>10?i.displayName.substring(0,10)+"...":i.displayName;return e.jsx(q,{item:i,copyToClipboard:P=>{w(P,i.displayName),s(`Copied the contents of ${E} to your clipboard!`)}},i.id)})})]})},re=()=>e.jsxs("footer",{className:"footer",children:[e.jsx("span",{className:"footer-line",children:"Built with ❤️"}),e.jsxs("span",{className:"footer-line",children:["Deployed via"," ",e.jsx("a",{href:"https://github.com/dottereldesign/be_write_back",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",children:e.jsx("svg",{className:"github-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.49.5.09.68-.21.68-.47v-1.65c-2.78.6-3.37-1.34-3.37-1.34-.45-1.16-1.1-1.47-1.1-1.47-.9-.62.07-.61.07-.61 1 .07 1.53 1.05 1.53 1.05.89 1.54 2.33 1.1 2.9.84.09-.64.35-1.1.63-1.35-2.22-.25-4.55-1.11-4.55-4.95 0-1.09.39-1.99 1.03-2.69-.1-.26-.45-1.3.1-2.72 0 0 .84-.27 2.75 1.02a9.57 9.57 0 0 1 5 0c1.91-1.29 2.75-1.02 2.75-1.02.55 1.42.2 2.46.1 2.72.64.7 1.03 1.6 1.03 2.69 0 3.85-2.34 4.7-4.56 4.95.36.31.68.92.68 1.85v2.75c0 .26.18.56.69.47A10.002 10.002 0 0 0 22 12c0-5.52-4.48-10-10-10z"})})})]}),e.jsx("span",{className:"footer-line",children:e.jsx("a",{href:"https://buymeacoffee.com/dottereldesign",target:"_blank",rel:"noopener noreferrer",className:"coffee-button","aria-label":"Buy me a coffee",children:e.jsx("img",{src:"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png",alt:"Buy Me A Coffee",className:"coffee-icon",width:"100",height:"30"})})}),e.jsx("span",{className:"footer-line",children:"© 2025 Jamie Wilson"})]}),le=({message:s,onClose:t})=>{const[a,o]=r.useState(!1);return r.useEffect(()=>{if(s){console.log("🟢 Showing toast with message:",s),o(!0);const n=setTimeout(()=>{console.log("🟠 Hiding toast"),o(!1),t&&t()},2e3);return()=>{clearTimeout(n)}}},[s,t]),e.jsxs("div",{className:`toast ${a?"show":"hide"}`,children:[e.jsx("div",{className:"toast-icon",children:e.jsx(m,{icon:$})}),e.jsx("span",{className:"toast-message",children:s}),e.jsx("button",{className:"toast-close",onClick:()=>{console.log("❌ Manually closing toast"),o(!1),t&&t()},children:e.jsx(m,{icon:B})})]})};function ce(){const{toastMessage:s,triggerToast:t}=b();return e.jsxs("div",{id:"root",children:[e.jsx(J,{}),e.jsx(le,{message:s,onClose:()=>console.log("🚀 Toast closed")}),e.jsx("main",{children:e.jsx(oe,{triggerToast:t})}),e.jsx(re,{})]})}K.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(ce,{})}));
